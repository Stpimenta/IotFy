# ğŸŒ iotFy  

## ğŸ“– IntroduÃ§Ã£o  

Agora mais maduro como desenvolvedor, estou reconstruindo meu antigo projeto **HomeYX**, agora chamado **iotFy**.  
O objetivo Ã© continuar aprendendo programaÃ§Ã£o enquanto modernizo minha casa de forma simples e econÃ´mica.  

---

## âš™ï¸ Setup  

- Broker **MQTT**  
- Microcontroladores **ESP**  
- Dispositivos: relÃ©s, fitas de LED, emissor IR...  

---

## ğŸ“¡ ComunicaÃ§Ã£o MQTT com ESPs  

Cada ESP possui um **ID Ãºnico** (`espid`) e se comunica por tÃ³picos MQTT:  

- **Receiver Topic**: `espid/receiver` â†’ ESP recebe comandos  
- **Sender Topic**: `espid/sender` â†’ ESP envia respostas  

**Comando nÃ£o reconhecido**  
Se o ESP receber algo invÃ¡lido, ele responde com a lista de comandos disponÃ­veis.  

---

## ğŸ”Œ Controle de RelÃ©  

**Comandos**:  
- `TURN_ON_RELAY` â†’ Liga o relÃ©  
- `TURN_OFF_RELAY` â†’ Desliga o relÃ©  
- `PULSE/{MS}` â†’ Pulso de X ms  
- `RESTART_ESP` â†’ Reinicia ESP  
- `STATE` â†’ Retorna `true/false`  

---

## ğŸ”„ RelÃ© + Servo (Interruptor Paralelo)  

Dois ESP-01 simulam um interruptor paralelo:  

- **Main ESP (Relay Serial)** â†’ Liga/desliga e responde a comandos.  
- **Secondary ESP (Servo)** â†’ Age como interruptor paralelo.  

**GPIO 3 (RX)** Ã© usado por limitaÃ§Ã£o do ESP-01.  

---

## ğŸ“¡ Emissor IR  

**Comando**:  
- `SEND_IR/{CODE}` â†’ Envia cÃ³digo IR em HEX  

---

## ğŸ’¡ Controle de Fita LED  

**Comandos**:  
- `ON` / `OFF` â†’ Liga/Desliga  
- `SET_COLOR/{R}/{G}/{B}` â†’ Define cor RGB  
- `SET_BRIGHTNESS/{VALUE}` â†’ Ajusta brilho (0â€“255)  
- `FADE`, `SOLID_COLOR`, `WAVES`, `THEATERCHASE`, `COMET` â†’ Efeitos visuais  
- `STATE` â†’ Retorna estado atual (ON/OFF, cor, brilho, efeito, velocidade)  

**ParÃ¢metros**  
- **Cor** â†’ RGB (0â€“255)  
- **Brilho** â†’ 0 a 255  
- **Velocidade** â†’ 0 a 255 (quanto maior, mais rÃ¡pido)  

---

# ğŸŒ iotFy  

## ğŸ“– Introduction  

Now, as a more mature developer, Iâ€™m rebuilding my old project **HomeYX**, rebranded as **iotFy**.  
The goal is to keep learning programming while making my home smarter, integrated, and affordable.  

---

## âš™ï¸ Setup  

- **MQTT** broker  
- **ESP** microcontrollers  
- Devices: relays, LED strips, IR sender...  

---

## ğŸ“¡ MQTT Communication with ESPs  

Each ESP has a **unique ID** (`espid`) and communicates via MQTT topics:  

- **Receiver Topic**: `espid/receiver` â†’ ESP receives commands  
- **Sender Topic**: `espid/sender` â†’ ESP sends responses  

**Unrecognized Command**  
If the ESP receives something invalid, it replies with the list of available commands.  

---

## ğŸ”Œ Relay Control  

**Commands**:  
- `TURN_ON_RELAY` â†’ Turns relay ON  
- `TURN_OFF_RELAY` â†’ Turns relay OFF  
- `PULSE/{MS}` â†’ Pulse X ms  
- `RESTART_ESP` â†’ Restart ESP  
- `STATE` â†’ Returns `true/false`  

---

## ğŸ”„ Relay + Servo (Parallel Switch)  

Two ESP-01 simulate a parallel switch:  

- **Main ESP (Relay Serial)** â†’ Controls the relay and responds to commands.  
- **Secondary ESP (Servo)** â†’ Works as a parallel switch.  

**GPIO 3 (RX)** is used due to ESP-01 limitation.  

---

## ğŸ“¡ IR Sender  

**Command**:  
- `SEND_IR/{CODE}` â†’ Sends IR code in HEX  

---

## ğŸ’¡ LED Strip Control  

**Commands**:  
- `ON` / `OFF` â†’ Turns ON/OFF  
- `SET_COLOR/{R}/{G}/{B}` â†’ Set RGB color  
- `SET_BRIGHTNESS/{VALUE}` â†’ Set brightness (0â€“255)  
- `FADE`, `SOLID_COLOR`, `WAVES`, `THEATERCHASE`, `COMET` â†’ Visual effects  
- `STATE` â†’ Returns current state (ON/OFF, color, brightness, effect, speed)  

**Parameters**  
- **Color** â†’ RGB (0â€“255)  
- **Brightness** â†’ 0 to 255  
- **Velocity** â†’ 0 to 255 (higher = faster)  
